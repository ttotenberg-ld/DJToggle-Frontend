# DJToggle Frontend Walkthrough

The **DJToggle Frontend** is a React-based "DJ Dashboard" that allows an audience to vote on musical patterns in real-time. The audio is generated by **Strudel** and controlled by **LaunchDarkly** feature flags.

## Features implemented

-   **Premium Dark UI**: Glassmorphism effects, neon gradients, and responsive grid layout.
-   **Audio Engine**: Integrated `@strudel/core` with a custom hook (`useStrudel`) that hot-swaps patterns based on LD flags.
-   **Voting System**: Users can click on patterns to vote. Each vote sends a `vote` metric to LaunchDarkly with `{ track, option }` attributes.
-   **LaunchDarkly Integration**: Uses `LDProvider` to sync feature flags (`bass`, `drums`, `harmony`, `melody`) with the audio engine in real-time.

## Configuration

> [!IMPORTANT]
> You must configure your `.env` file before running the app.

1.  Rename `.env` (already created) and add your Client ID:
    ```env
    VITE_LAUNCHDARKLY_CLIENT_ID=your-client-id-here
    ```
2.  In LaunchDarkly, create 4 string flags: `bass`, `drums`, `harmony`, `melody`.
    -   Variations: `option1`, `option2`, `option3`.
3.  Create a custom metric key: `vote`.

## Usage

1.  Start the dev server:
    ```bash
    npm run dev
    ```
2.  Open the app. The music starts stopped. Click the **Play** button.
3.  The audio patterns will play according to the default/served values of your flags.
4.  **Vote** by clicking on any option card. The UI will update cleanly, and a metric event is sent.
5.  **Change Flags** in LaunchDarkly. The audio will update instantly (or on the next cycle) to match the new live pattern.

## Code Highlights

-   **`src/App.jsx`**: Main orchestration. Maps flags to Strudel patterns.
-   **`src/hooks/useStrudel.js`**: Re-evaluates pattern strings safely in a global context enriched with Strudel functions.
-   **`src/audio/patterns.js`**: Contains the Strudel code snippets for each variation.
